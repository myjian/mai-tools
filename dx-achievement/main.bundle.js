(()=>{"use strict";var e={6624:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(8081),a=n.n(r),l=n(3645),o=n.n(l)()(a());o.push([e.id,"html {\r\n  background-color: #e1f1f9;\r\n  font-family: sans-serif;\r\n}\r\n\r\n.noteCount {\r\n  width: 60px;\r\n}\r\n\r\nform div {\r\n  margin-bottom: 10px;\r\n}\r\n\r\ntable {\r\n  border-collapse: collapse;\r\n}\r\n\r\nth,\r\ntd {\r\n  text-align: start;\r\n  padding: 4px;\r\n}\r\n\r\ninput {\r\n  font-size: 1.3rem;\r\n  text-align: right;\r\n  padding: 3px 4px;\r\n  color: inherit;\r\n}\r\n\r\nbutton {\r\n  font-size: 1.3rem;\r\n  padding: 4px 16px;\r\n  margin-bottom: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\nbutton:nth-child(2) {\r\n  margin-left: 6px;\r\n}\r\n\r\n.judgementInputRow {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.judgementInputCol {\r\n  padding: 2px;\r\n}\r\n\r\n.judgementInputCol:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n.resultHeading {\r\n  margin-top: 30px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.resultHeading h3 {\r\n  margin-bottom: 5px;\r\n}\r\n\r\n.dxAchvDetails {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.dxAchvDetails td,\r\n.dxAchvDetails th {\r\n  min-width: 40px;\r\n  font-size: 0.9rem;\r\n  text-align: center;\r\n  border: 1px solid grey;\r\n}\r\n\r\n@media only screen and (max-width: 361px) {\r\n  .dxAchvDetails td,\r\n  .dxAchvDetails th {\r\n    min-width: 30px;\r\n    font-size: 0.8rem;\r\n    padding: 3px;\r\n  }\r\n}\r\n\r\n.dxAchvDetails .dxAchv {\r\n  font-size: 1.3rem;\r\n  text-align: start;\r\n  font-weight: normal;\r\n  border: none;\r\n  padding-left: 0;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.perfectJudgement {\r\n  color: #ff9d03;\r\n}\r\n\r\n.greatJudgement {\r\n  color: #f75ea3;\r\n}\r\n\r\n.goodJudgement {\r\n  color: #2fca4c;\r\n}\r\n\r\n.missJudgement {\r\n  color: #868686;\r\n}\r\n\r\n.copyLink {\r\n  position: absolute;\r\n  bottom: 1px;\r\n  right: 1px;\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border-style: none;\r\n  margin: 2px 0;\r\n  font-size: 12px;\r\n}\r\n",""]);const i=o},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,l){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var u=this[i][0];null!=u&&(o[u]=!0)}for(var c=0;c<e.length;c++){var s=[].concat(e[c]);r&&o[s[0]]||(void 0!==l&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=l),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),a&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=a):s[4]="".concat(a)),t.push(s))}},t}},8081:e=>{e.exports=function(e){return e[1]}},6376:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(3379),a=n.n(r),l=n(7795),o=n.n(l),i=n(569),u=n.n(i),c=n(3565),s=n.n(c),d=n(9216),f=n.n(d),m=n(4589),p=n.n(m),h=n(6624),g={};g.styleTagTransform=p(),g.setAttributes=s(),g.insert=u().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=f(),a()(h.Z,g);const v=h.Z&&h.Z.locals?h.Z.locals:void 0},3379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var l={},o=[],i=0;i<e.length;i++){var u=e[i],c=r.base?u[0]+r.base:u[0],s=l[c]||0,d="".concat(c," ").concat(s);l[c]=s+1;var f=n(d),m={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==f)t[f].references++,t[f].updater(m);else{var p=a(m,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var l=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<l.length;o++){var i=n(l[o]);t[i].references--}for(var u=r(e,a),c=0;c<l.length;c++){var s=n(l[c]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}l=u}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var l=n.sourceMap;l&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(l))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1782:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_JUDGEMENT_OBJ=t.BREAK_BONUS_MULTIPLIER=t.BREAK_BASE_SCORE_MULTIPLIER=t.MAX_BREAK_POINTS=t.BREAK_BONUS_POINTS=t.REGULAR_BASE_SCORE_MULTIPLIER=t.BASE_SCORE_PER_TYPE=t.DX_NOTE_TYPES=void 0,t.DX_NOTE_TYPES=["tap","hold","slide","touch","break"],t.BASE_SCORE_PER_TYPE={tap:500,hold:1e3,touch:500,slide:1500,break:2500},t.REGULAR_BASE_SCORE_MULTIPLIER={cp:1,perfect:1,great:.8,good:.5,miss:0},t.BREAK_BONUS_POINTS=100,t.MAX_BREAK_POINTS=t.BASE_SCORE_PER_TYPE.break+t.BREAK_BONUS_POINTS,t.BREAK_BASE_SCORE_MULTIPLIER=new Map([[t.MAX_BREAK_POINTS,1],[2550,1],[2500,1],[2e3,.8],[1500,.6],[1250,.5],[1e3,.4],[0,0]]),t.BREAK_BONUS_MULTIPLIER=new Map([[t.MAX_BREAK_POINTS,1],[2550,.75],[2500,.5],[2e3,.4],[1500,.4],[1250,.4],[1e3,.3],[0,0]]),t.EMPTY_JUDGEMENT_OBJ={perfect:0,great:0,good:0,miss:0}},6358:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.formatFloat=t.roundFloat=t.sum=t.compareNumber=void 0,t.compareNumber=function(e,t){return e>t?1:e<t?-1:0},t.sum=function(e){let t=0;for(const n of e)t+=n;return t},t.roundFloat=function(e,t,n){return Math[t](e/n)*n},t.formatFloat=function(e,t){return e?e.toFixed(t):"0"}},611:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxAchievementCalculator=void 0;const a=r(n(7363)),l=n(1089),o=n(4459);class i extends a.default.PureComponent{constructor(e){super(e),this.handleChangeFinaleAchv=e=>{const t=parseFloat(e.currentTarget.value);t>0&&this.setState({finaleAchv:t})},this.handleChangeTotalScore=e=>{const t=parseInt(e.currentTarget.value);if(t>0){const n={[e.currentTarget.name]:t};this.setState(n)}},this.handleChangeBreakJudgement=e=>{const t=parseInt(e.currentTarget.value);if(t>=0){const n=parseInt(e.currentTarget.name.substring(6));this.setState((({breakJudgements:e})=>({breakJudgements:e.map(((e,r)=>r===n?t:e))})))}},this.handleCopyLink=()=>{window.location.assign(this.getUrlForCurrentInput())},this.handleFillExample=e=>{e.preventDefault(),Math.random()>.5?location.assign("?achv=100.46&bs=170850&ts=385300&bj=65-2-0-0"):location.assign("?achv=99.96&bs=64050&ts=380850&bj=24-1-0-0")},this.handleReset=e=>{e.preventDefault(),location.assign("?")};const t=new URLSearchParams(location.search),n=t.get("ac")||t.get("achv"),r=t.get("ts"),a=t.get("bs"),l=t.get("bj");if(n&&r&&a&&l){const e=parseFloat(n),t=parseInt(r),o=parseInt(a),i=l.split("-"),u=i.map((e=>parseInt(e,10)));if(e>0&&t>0&&o>=0&&4===u.length)return void(this.state={initialFinaleAchvInput:n,finaleAchv:e,initialTotalScoreInput:r,totalScore:t,initialBreakScoreInput:a,breakScore:o,initialBreakJudgementsInput:i,breakJudgements:u})}this.state={initialFinaleAchvInput:"",finaleAchv:0,initialTotalScoreInput:"",totalScore:0,initialBreakScoreInput:"",breakScore:0,initialBreakJudgementsInput:["","","",""],breakJudgements:[0,0,0,0]}}render(){const{finaleAchv:e,initialFinaleAchvInput:t,totalScore:n,initialTotalScoreInput:r,breakScore:i,initialBreakScoreInput:u,breakJudgements:c,initialBreakJudgementsInput:s}=this.state,d=(0,o.calculateDxAchvFromFinaleResult)(e,n,i,c);return a.default.createElement(a.default.Fragment,null,a.default.createElement("form",null,a.default.createElement("div",null,a.default.createElement("button",{onClick:this.handleFillExample},"Fill example data"),a.default.createElement("button",{onClick:this.handleReset},"Reset")),a.default.createElement("div",null,a.default.createElement("strong",null,"Finale Achievement:"),a.default.createElement("br",null),a.default.createElement("input",{onChange:this.handleChangeFinaleAchv,defaultValue:t}),"%"),a.default.createElement("div",null,a.default.createElement("strong",null,"Total Score:"),a.default.createElement("br",null),a.default.createElement("input",{name:"totalScore",onChange:this.handleChangeTotalScore,defaultValue:r})),a.default.createElement("div",null,a.default.createElement("strong",null,"Break Score:"),a.default.createElement("br",null),a.default.createElement("input",{name:"breakScore",defaultValue:u,onChange:this.handleChangeTotalScore})),a.default.createElement("div",null,a.default.createElement("strong",null,"Break Judgements:"),a.default.createElement("br",null),a.default.createElement("div",{className:"judgementInputRow"},a.default.createElement("div",{className:"judgementInputCol perfectJudgement"},"Perfect",a.default.createElement("br",null),a.default.createElement("input",{className:"noteCount",name:"break_0",defaultValue:s[0],onChange:this.handleChangeBreakJudgement})),a.default.createElement("div",{className:"judgementInputCol greatJudgement"},"Great",a.default.createElement("br",null),a.default.createElement("input",{className:"noteCount",name:"break_1",defaultValue:s[1],onChange:this.handleChangeBreakJudgement})),a.default.createElement("div",{className:"judgementInputCol goodJudgement"},"Good",a.default.createElement("br",null),a.default.createElement("input",{className:"noteCount",defaultValue:s[2],name:"break_2",onChange:this.handleChangeBreakJudgement})),a.default.createElement("div",{className:"judgementInputCol missJudgement"},"Miss",a.default.createElement("br",null),a.default.createElement("input",{className:"noteCount",name:"break_3",defaultValue:s[3],onChange:this.handleChangeBreakJudgement}))))),d.size?a.default.createElement("div",{className:"resultHeading"},a.default.createElement("h3",null,this.getDxAchvRange(d)),a.default.createElement("a",{href:this.getUrlForCurrentInput()},"Link to this result")):null,Array.from(d.entries()).map((([e,t],n)=>a.default.createElement(l.DxAchvDetails,{key:n,dxAchv:e,breakDist:t}))),a.default.createElement("button",{className:"copyLink",type:"button",onClick:this.handleCopyLink},"ðŸ“Ž"))}getDxAchvRange(e){let t,n;for(const r of e.keys())t||(t=r),n=r;return t===n?`DX Achievement: ${t}%`:parseFloat(t)<parseFloat(n)?`DX Achievement Range: ${t}% - ${n}%`:`DX Achievement Range: ${n}% - ${t}%`}getUrlForCurrentInput(){const{finaleAchv:e,totalScore:t,breakScore:n,breakJudgements:r}=this.state;return"?"+new URLSearchParams({ac:e.toFixed(2),bs:n.toString(),ts:t.toString(),bj:r.join("-")})}}t.DxAchievementCalculator=i},1089:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxAchvDetails=void 0;const a=r(n(7363)),l=n(1782);function o(e){return e>2e3?"perfectJudgement":e>1e3?"greatJudgement":e>0?"goodJudgement":"missJudgement"}class i extends a.default.PureComponent{render(){const{dxAchv:e,breakDist:t}=this.props;return a.default.createElement("table",{className:"dxAchvDetails"},a.default.createElement("thead",null,a.default.createElement("tr",null,a.default.createElement("th",{className:"dxAchv",colSpan:8},e,"%")),a.default.createElement("tr",null,Array.from(l.BREAK_BONUS_MULTIPLIER.keys()).map(((e,t)=>a.default.createElement("th",{key:t,className:o(e)},e))))),a.default.createElement("tbody",null,a.default.createElement("tr",null,Array.from(l.BREAK_BONUS_MULTIPLIER.keys()).map(((e,n)=>a.default.createElement("td",{key:n,className:o(e)},t.get(e)))))))}}t.DxAchvDetails=i},4459:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDxAchvFromFinaleResult=void 0;const r=n(1782),a=n(6358);function l(e,t,n,r){if(t<0)return;let a=[];switch(e.length){case 0:return 0===t?(r.push(new Map(n)),!0):void 0;case 1:a=[2600,2550,2500];break;case 2:a=[2e3,1500,1250];break;case 3:a=[1e3];break;default:a=[0]}const o=1===e.length,i=e[e.length-1];if(n.get(2e3)&&n.get(1250)&&console.log(i,t),3===a.length)for(let u=i;u>=0;u--){n.set(a[0],u);const c=t-a[0]*u;if(c<0)continue;const s=o?i-u+1>>1:0;for(let t=i-u;t>=s;t--){const s=i-u-t;n.set(a[1],t),n.set(a[2],s);const d=l(e.slice(0,e.length-1),c-a[1]*t-a[2]*s,n,r);if(n.get(2e3)&&n.get(1250)&&console.log(u,t,s,c,d),d&&o)return}}else 1===a.length?(n.set(a[0],i),l(e.slice(0,e.length-1),t-a[0]*i,n,r)):console.error("Unreachable")}t.calculateDxAchvFromFinaleResult=function(e,t,n,o){const i=(0,a.roundFloat)(t/e*100,"floor",50),u=o.reduce(((e,t)=>e+t),0);if(e<=0||t<=0||n>t||i<=0||u<=0)return new Map;const c=[];if(l(o,n,new Map,c),!c.length)return console.warn(`Could not find break distribution for achv=${e}, totalScore=${t}, breakScore=${n}, breakJudgements=${o.join("-")}`),new Map;const s=100*(t-n)/i,d=25e4/i,f=1/u,m=new Map;for(const e of c){let t=s;e.forEach(((e,n)=>{t+=e*r.BREAK_BASE_SCORE_MULTIPLIER.get(n)*d,t+=e*r.BREAK_BONUS_MULTIPLIER.get(n)*f}));const n=(0,a.roundFloat)(t,"floor",1e-4).toFixed(4);m.set(n,e)}return console.log(m),m}},5793:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(7363)),l=r(n(1533)),o=n(611);n(6376),l.default.render(a.default.createElement(o.DxAchievementCalculator,null),document.getElementById("root"))},7363:e=>{e.exports=React},1533:e=>{e.exports=ReactDOM}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={id:r,exports:{}};return e[r].call(l.exports,l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,n(5793)})();